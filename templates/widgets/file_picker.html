<div class="mb-4">
    {% if widget.attrs.label %}
        <label for="{{ widget.attrs.id }}" class="block text-sm font-medium text-gray-700 mb-1">
            {{ widget.attrs.label }}
            {% if widget.attrs.required %}<span class="text-red-500">*</span>{% endif %}
        </label>
    {% endif %}
    <div class="relative">
        <input
            type="file"
            name="{{ widget.name }}"
            id="{{ widget.attrs.id }}"
            class="w-full px-4 py-2 bg-white rounded-lg shadow-sm focus:outline-none"
            style="border: 1px solid #4856da; {% if form.errors.name %}border: 1px solid #ef4444;{% endif %}"
            onfocus="this.style.borderColor='#4856da'; this.style.boxShadow='0 0 0 2px rgba(72, 86, 218, 0.2)'"
            onblur="this.style.borderColor='{% if form.errors.name %}#ef4444{% else %}#4856da{% endif %}'; this.style.boxShadow='none'"
            {% if widget.attrs.required %}required{% endif %}
            {% for attr_name, attr_value in widget.attrs.items %}
                {% if attr_name != 'id' and attr_name != 'label' and attr_name != 'required' %}
                    {{ attr_name }}="{{ attr_value }}"
                {% endif %}
            {% endfor %}
        >
        {% if widget.clear_checkbox_name %}
            <div class="mt-2 flex items-center">
                <input
                    type="checkbox"
                    name="{{ widget.clear_checkbox_name }}"
                    id="{{ widget.clear_checkbox_id }}"
                    class="h-4 w-4 rounded"
                    style="border: 1px solid #4856da; accent-color: #4856da;"
                    onfocus="this.style.borderColor='#4856da'; this.style.boxShadow='0 0 0 2px rgba(72, 86, 218, 0.2)'"
                    onblur="this.style.borderColor='#4856da'; this.style.boxShadow='none'"
                >
                <label for="{{ widget.clear_checkbox_id }}" class="ml-2 text-sm text-gray-700">
                    Clear
                </label>
            </div>
        {% endif %}
    </div>
    {% if form.errors %}
        {% for error in form.errors.name %}
            <p class="mt-1 text-sm text-red-500">{{ error }}</p>
        {% endfor %}
    {% endif %}
</div>